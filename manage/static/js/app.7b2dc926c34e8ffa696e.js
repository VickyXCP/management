webpackJsonp([1],{"8ERD":function(e,t){},CTEf:function(e,t){},G5qc:function(e,t){},NHnr:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n("7+uW"),s={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"fillcontain",attrs:{id:"app"}},[t("router-view")],1)},staticRenderFns:[]};var r=n("VU/8")({name:"App"},s,!1,function(e){n("Tpof")},null,null).exports,o=n("/ocq"),i=n("Xxa5"),c=n.n(i),u=n("exGp"),l=n.n(u),m=n("Dd8w"),d=n.n(m),p=n("pFYg"),v=n.n(p),f=n("//Fk"),h=n.n(f),_=n("mvHQ"),g=n.n(_),w=n("fZjL"),x=n.n(w),b=void 0;b="//elm.cangdu.org/img/";var C,y=this,k=(C=l()(c.a.mark(function e(){var t,n,a,s,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"fetch";return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(i=i.toUpperCase(),r="http://elm.cangdu.org"+r,"GET"==i&&(t="",x()(o).forEach(function(e){t+=e+"="+o[e]+"&"}),""!==t&&(t=t.substr(0,t.lastIndexOf("&")),r=r+"?"+t)),!window.fetch||"fetch"!=u){e.next=21;break}return n={credentials:"include",method:i,headers:{Accept:"application/json","Content-Type":"application/json"},mode:"cors",cache:"force-cache"},"POST"==i&&Object.defineProperty(n,"body",{value:g()(o)}),e.prev=6,e.next=9,fetch(r,n);case 9:return a=e.sent,e.next=12,a.json();case 12:return s=e.sent,e.abrupt("return",s);case 16:throw e.prev=16,e.t0=e.catch(6),new Error(e.t0);case 19:e.next=22;break;case 21:return e.abrupt("return",new h.a(function(e,t){var n=void 0;n=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject;var a="";"POST"==i&&(a=g()(o)),n.open(i,r,!0),n.setRequestHeader("Content-type","application/x-www-form-urlencoded"),n.send(a),n.onreadystatechange=function(){if(4==n.readyState)if(200==n.status){var a=n.response;"object"!==(void 0===a?"undefined":v()(a))&&(a=JSON.parse(a)),e(a)}else t(n)}}));case 22:case"end":return e.stop()}},e,y,[[6,16]])})),function(){return C.apply(this,arguments)}),F=n("NYxO"),$={data:function(){return{loginForm:{username:"",password:""},rules:{username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]},showLogin:!1}},mounted:function(){this.showLogin=!0,this.adminInfo.id||this.getAdminData()},computed:d()({},Object(F.c)({adminInfo:function(e){return e.adminInfo}})),methods:d()({},Object(F.b)(["getAdminData"]),{submitForm:function(e){var t=this;return l()(c.a.mark(function n(){return c.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:t.$refs[e].validate(function(){var e=l()(c.a.mark(function e(n){var a;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=7;break}return e.next=3,s={user_name:t.loginForm.username,password:t.loginForm.password},k("/admin/login",s,"POST");case 3:1==(a=e.sent).status?(t.$message({type:"success",message:"登录成功"}),t.$router.push("manage")):t.$message({type:"error",message:a.message}),e.next=9;break;case 7:return t.$notify.error({title:"错误",message:"请输入正确的用户名密码",offset:100}),e.abrupt("return",!1);case 9:case"end":return e.stop()}var s},e,t)}));return function(t){return e.apply(this,arguments)}}());case 1:case"end":return n.stop()}},n,t)}))()}}),watch:{adminInfo:function(e){e.id&&(this.$message({type:"success",message:"检测到您之前登录过，将自动登录"}),this.$router.push("manage"))}}},A={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"login fillcontain"},[n("transition",{attrs:{name:"form-fade",mode:"in-out"}},[n("section",{directives:[{name:"show",rawName:"v-show",value:e.showLogin,expression:"showLogin"}],staticClass:"form_container"},[n("div",{staticClass:"manage_tip"},[n("p",[e._v("elm后台管理系统")])]),e._v(" "),n("el-form",{ref:"loginForm",attrs:{model:e.loginForm,rules:e.rules}},[n("el-form-item",{attrs:{prop:"username"}},[n("el-input",{attrs:{placeholder:"用户名"},model:{value:e.loginForm.username,callback:function(t){e.$set(e.loginForm,"username",t)},expression:"loginForm.username"}},[n("span",[e._v("dsfsf")])])],1),e._v(" "),n("el-form-item",{attrs:{prop:"password"}},[n("el-input",{attrs:{type:"password",placeholder:"密码"},model:{value:e.loginForm.password,callback:function(t){e.$set(e.loginForm,"password",t)},expression:"loginForm.password"}})],1),e._v(" "),n("el-form-item",[n("el-button",{staticClass:"submit_btn",attrs:{type:"primary"},on:{click:function(t){e.submitForm("loginForm")}}},[e._v("登录")])],1)],1),e._v(" "),n("p",{staticClass:"tip"},[e._v("温馨提示：")]),e._v(" "),n("p",{staticClass:"tip"},[e._v("未登录过的新用户，自动注册")]),e._v(" "),n("p",{staticClass:"tip"},[e._v("注册过的用户可凭账号密码登录")])],1)])],1)},staticRenderFns:[]};var j=n("VU/8")($,A,!1,function(e){n("G5qc")},"data-v-3734743f",null).exports,E={name:"HeadTop",data:function(){return{baseImgPath:b}},created:function(){this.adminInfo.id||this.getAdminData()},computed:d()({},Object(F.c)({adminInfo:function(e){return e.adminInfo}})),methods:d()({},Object(F.b)(["getAdminData"]),{handleCommand:function(e){var t=this;return l()(c.a.mark(function n(){return c.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:"home"==e?t.$router.push("/manage"):"signout"==e&&(1==res.status?(t.$message({type:"success",message:"退出成功"}),t.$router.push("/")):t.$message({type:"error",message:res.message}));case 1:case"end":return n.stop()}},n,t)}))()}})},I={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"head_top"},[n("el-breadcrumb",{attrs:{separator:"/"}},[n("el-breadcrumb-item",{attrs:{to:{path:"/manage"}}},[e._v("首页")]),e._v(" "),e._l(e.$router.meta,function(t,a){return n("el-breadcrumb-item",{key:a},[e._v(e._s(t))])})],2),e._v(" "),n("el-dropdown",{attrs:{"menu-align":"start"},on:{command:e.handleCommand}},[n("img",{staticClass:"avatar",attrs:{src:e.baseImgPath+e.adminInfo.avatar}}),e._v(" "),n("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[n("el-dropdown-item",{attrs:{command:"home"}},[e._v("首页")]),e._v(" "),n("el-dropdown-item",{attrs:{command:"signout"}},[e._v("退出")])],1)],1)],1)},staticRenderFns:[]};var L={name:"home",components:{HeadTop:n("VU/8")(E,I,!1,function(e){n("CTEf")},"data-v-5794c4f1",null).exports}},O={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"home"},[t("head-top")],1)},staticRenderFns:[]};var T=n("VU/8")(L,O,!1,function(e){n("jZCs")},"data-v-228d0a92",null).exports,R={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"manage fillcontain"},[n("el-row",{staticStyle:{height:"100%"}},[n("el-col",{staticStyle:{"background-color":"#324157","min-height":"100%"},attrs:{span:4}},[n("el-menu",{staticClass:"el-menu-vertical-demo",attrs:{"default-active":e.defaultActive,"background-color":"#324057","text-color":"#fff","active-text-color":"#20a0ff"}},[n("el-menu-item",{staticStyle:{"background-color":"#324057 !important"},attrs:{index:"manage"}},[n("i",{staticClass:"el-icon-menu"}),e._v("首页\n                ")]),e._v(" "),n("el-submenu",{attrs:{index:"2"}},[n("template",{slot:"title"},[n("i",{staticClass:"el-icon-document"}),e._v(" "),n("span",[e._v("数据管理")])]),e._v(" "),n("el-menu-item",{attrs:{index:"userList"}},[e._v("用户列表")]),e._v(" "),n("el-menu-item",{attrs:{index:"shopList"}},[e._v("商家列表")]),e._v(" "),n("el-menu-item",{attrs:{index:"foodList"}},[e._v("食品列表")]),e._v(" "),n("el-menu-item",{attrs:{index:"orderList"}},[e._v("订单列表")]),e._v(" "),n("el-menu-item",{attrs:{index:"adminList"}},[e._v("管理员列表")])],2),e._v(" "),n("el-submenu",{attrs:{index:"3"}},[n("template",{slot:"title"},[n("i",{staticClass:"el-icon-plus"}),e._v(" "),n("span",[e._v("添加数据")])]),e._v(" "),n("el-menu-item",{attrs:{index:"addShop"}},[e._v("添加商铺")]),e._v(" "),n("el-menu-item",{attrs:{index:"addGoods"}},[e._v("添加商品")])],2),e._v(" "),n("el-submenu",{attrs:{index:"4"}},[n("template",{slot:"title"},[n("i",{staticClass:"el-icon-picture"}),e._v(" "),n("span",[e._v("图表")])]),e._v(" "),n("el-menu-item",{attrs:{index:"visitor"}},[e._v("用户分布")])],2),e._v(" "),n("el-submenu",{attrs:{index:"5"}},[n("template",{slot:"title"},[n("i",{staticClass:"el-icon-edit"}),e._v(" "),n("span",[e._v("编辑")])]),e._v(" "),n("el-menu-item",{attrs:{index:"vueEdit"}},[e._v("文本编辑")])],2),e._v(" "),n("el-submenu",{attrs:{index:"6"}},[n("template",{slot:"title"},[n("i",{staticClass:"el-icon-setting"}),e._v(" "),n("span",[e._v("设置")])]),e._v(" "),n("el-menu-item",{attrs:{index:"adminSet"}},[e._v("管理员设置")])],2),e._v(" "),n("el-submenu",{attrs:{index:"7"}},[n("template",{slot:"title"},[n("i",{staticClass:"el-icon-info"}),e._v(" "),n("span",[e._v("说明")])]),e._v(" "),n("el-menu-item",{attrs:{index:"explain"}},[e._v("说明")])],2)],1)],1),e._v(" "),n("el-col",{staticStyle:{height:"100%"},attrs:{span:20}},[n("keep-alive",[n("router-view")],1)],1)],1)],1)},staticRenderFns:[]};var S=n("VU/8")({name:"manage",computed:{defaultActive:function(){return this.$route.path.replace("/","")}}},R,!1,function(e){n("8ERD")},"data-v-0b16a499",null).exports;a.default.use(o.a);var q=new o.a({routes:[{path:"/",name:"login",component:j},{path:"/manage",name:"manage",component:S,children:[{path:"",name:"home",component:T}]}]}),D=n("zL8q"),H=n.n(D);n("tvR6"),n("lA6w");a.default.use(F.a);var P={getAdminData:function(e){var t=this,n=e.commit;return l()(c.a.mark(function e(){var a;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k("/admin/info");case 3:if(1!=(a=e.sent).status){e.next=8;break}n("saveAdminInfo",a.data),e.next=9;break;case 8:throw new Error(a);case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log("您尚未登陆或者session失效");case 14:case"end":return e.stop()}},e,t,[[0,11]])}))()}},G=new F.a.Store({state:{adminInfo:{avatar:"default.jpg"}},actions:P,mutations:{saveAdminInfo:function(e,t){e.adminInfo=t}}}),U=n("mtWM"),N=n.n(U);a.default.config.productionTip=!1,a.default.prototype.axios=N.a,a.default.use(H.a),new a.default({el:"#app",router:q,store:G,components:{App:r},template:"<App/>"})},Tpof:function(e,t){},jZCs:function(e,t){},lA6w:function(e,t){},tvR6:function(e,t){}},["NHnr"]);